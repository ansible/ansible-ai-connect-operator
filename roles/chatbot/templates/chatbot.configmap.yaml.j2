# AnsibleAIConnectChatbot ConfigMap.
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: '{{ ansible_operator_meta.name }}-{{ deployment_type }}-chatbot-env-properties'
  namespace: '{{ ansible_operator_meta.namespace }}'
  labels:
    {{ lookup("template", "../common/templates/labels/common.yaml.j2") | indent(width=4) | trim }}
data:
  # Specific settings for "on prem"
  COMMERCIAL_DOCUMENTATION_URL: "https://access.redhat.com/documentation/en-us/red_hat_ansible_lightspeed_with_ibm_watsonx_code_assistant/2.x_latest/html/red_hat_ansible_lightspeed_with_ibm_watsonx_code_assistant_user_guide/index"
  ALLOW_METRICS_FOR_ANONYMOUS_USERS: "false"
  DEPLOYMENT_MODE: "onprem"

  # Remove 'deployed_region' from the /status/check endpoint
  # See https://issues.redhat.com/browse/AAP-21787
  DEPLOYED_REGION: ""

  # Always disabled for "on prem"
  ENABLE_HEALTHCHECK_ATTRIBUTION: "false"
  ENABLE_HEALTHCHECK_AUTHORIZATION: "false"
  ENABLE_HEALTHCHECK_SECRET_MANAGER: "false"

  PYTHONUNBUFFERED: "1"

  # Custom user variables
{% for item in extra_settings | default([]) %}
  {{ item.setting | upper }}: "{{ item.value }}"
{% endfor %}
